var progressbar;jQuery(document).ready(function($){$("form#envira-nextgen-importer-galleries").submit(function(r){r.preventDefault();var a=$("input[name=galleries]:checked");if(0==a.length)return alert(envira_nextgen_importer_settings.no_galleries_selected),!1;$("form#envira-nextgen-importer-galleries :input").prop("disabled",!0),progressbar=$("#gallery-progress").progressbar({value:0});var n=-1,t=[];$(a).each(function(e){t[e]=$(this).val()}),e("gallery",t,n)}),$("form#envira-nextgen-importer-albums").submit(function(r){r.preventDefault();var a=$("input[name=albums]:checked");if(0==a.length)return alert(envira_nextgen_importer_settings.no_albums_selected),!1;$("form#envira-nextgen-importer-albums :input").prop("disabled",!0),progressbar=$("#album-progress").progressbar({value:0});var n=-1,t=[];$(a).each(function(e){t[e]=$(this).val()}),e("album",t,n)});var e=function(e,a,n){if(n++,a.length!=n)r(e,a,n);else switch(e){case"album":$("form#envira-nextgen-importer-albums :input").prop("disabled",!1);break;case"gallery":$("form#envira-nextgen-importer-galleries :input").prop("disabled",!1)}},r=function(r,n,t){var i=n[t];switch(r){case"album":var s=$("form#envira-nextgen-importer-albums label[data-id="+i+"]");break;case"gallery":var s=$("form#envira-nextgen-importer-galleries label[data-id="+i+"]")}$(s).removeClass().addClass("importing"),$("span",$(s)).text(envira_nextgen_importer_settings.importing),$.ajax({url:envira_nextgen_importer_settings.ajax,type:"post",async:!0,cache:!1,dataType:"json",data:{action:"envira_nextgen_importer_import_"+r,id:i,post_id:0,nonce:envira_nextgen_importer_settings.nonce},success:function(i){a(r,n,t,i.success,i.message),e(r,n,t)},error:function(i,s,l){a(r,n,t,!1,s),e(r,n,t)}})},a=function(e,r,a,n,t){var i=r[a];switch(e){case"album":var s=$("form#envira-nextgen-importer-albums label[data-id="+i+"]");break;case"gallery":var s=$("form#envira-nextgen-importer-galleries label[data-id="+i+"]")}$(s).removeClass().addClass(n?"imported":"error"),$("span",$(s)).text(t),progressbar.progressbar("value",Number((a+1)/r.length*100))}});